{% extends "sidebar_asset_management.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{#{% block header %}#}
{#<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/repo.css') }}">#}
{#{% endblock %}#}
{#{% block head %}#}
{##}
{#{% endblock %}#}
{% block script %}
    <script>
        var $table = $('#table')

        function loadingTemplate() {
            return '<i class="fa fa-spinner fa-spin fa-fw fa-2x"></i>'
        }


        function rowStyle(row, index) {
            console.log(row)
            console.log(row.has_static_ip)
            if (typeof row.has_static_ip !== "undefined") {
                if (row.has_static_ip === true) {
                    console.log("Is false")
                    return {
                        css: {
                            color: 'blue'
                        }
                    }
                } else {
                    console.log("Is true")
                    return {
                        css: {
                            color: 'red'
                        }
                    }
                }
            } else {
                console.log("Is undefined")
                return {
                    css: {
                        color: 'red'
                    }
                }
            }

        }

        $(function () {
            var data = {{ repo_assets | safe }};
            {#console.log(data)#}
            $table.bootstrapTable({data: data});
        })
    </script>
{% endblock %}

{% block content %}
    <h1>Repo Asset</h1>
    <hr/>
    <form action="/repo/assets/" method="post" novalidate>
        {#        {{ wtf.form_field(new_asset_form.name) }}#}
        {#        {{ wtf.form_field(new_asset_form.description) }}#}
        {#        {{ wtf.form_field(new_asset_form.owner) }}#}
        {#        {{ wtf.form_field(new_asset_form.verified_by[0]) }}#}

        {{ wtf.quick_form(new_asset_form) }}
        {#        <p>{{ wtf.form_field(new_asset_form.submit()) }}</p>#}
        </p>
    </form>
    <hr/>
    <div id="toolbar">
        <button id="remove" class="btn btn-danger" disabled>
            <i class="fa fa-trash"></i> Delete
        </button>
    </div>
    <table
            id="table"
            data-toolbar="#toolbar"
            data-search="true"
            data-search-on-enter-key="true"
            data-show-search-button="true"
            data-show-refresh="true"
            data-show-toggle="true"
            data-show-fullscreen="true"
            data-show-columns="true"
            data-show-columns-toggle-all="true"
            data-loading-template="loadingTemplate"
            data-pagination="true"
            data-page-list="[10, 25, 50, 100, all]"
            show-button-icons="true"
            data-row-style="rowStyle"
    >
        <thead>
        <tr>
            <th data-field="id" data-sortable="true">ID</th>
            <th data-field="name" data-sortable="true">Name</th>
            <th data-field="description" data-sortable="true">Description</th>
            <th data-field="owner" data-sortable="true">Owner</th>
            <th data-field="location" data-sortable="true">Location</th>
            <th data-field="Verified" data-sortable="true">Verified</th>
            <th data-field="verified_by" data-sortable="true">Verified by</th>
            <th data-field="mac_address" data-sortable="true">Mac_address</th>
            <th data-field="has_static_ip" data-sortable="true">Has static IP</th>
            <th data-field="ip">IP</th>
            <th data-field="net_group_fk" data-sortable="true">Name</th>
            <th data-field="value" data-sortable="true">Value</th>
            <th data-field="loss_of_revenue" data-sortable="true">Loss of Revenue</th>
            <th data-field="additional_expenses" data-sortable="true">Additional Expenses</th>
            <th data-field="regulatory_legal" data-sortable="true">Regulatory Legal</th>
            <th data-field="customer_service" data-sortable="true">Customer_service</th>
            <th data-field="goodwill" data-sortable="true">Goodwill</th>
            <th data-field="last_touch_date" data-sortable="true">Last Touch Date</th>
            <th data-field="type_fk" data-sortable="true">Type</th>
        </tr>
        </thead>
    </table>

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
