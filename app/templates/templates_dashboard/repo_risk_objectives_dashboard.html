{% extends "templates_supporting/sidebar_asset_management.html" %}

{% block script %}
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@3.2.0/dist/chart.min.js"></script>

    <script>

        var $table = $('#table')

        function operateFormatter(value, row, index) {
            return [
                '<a type="button" class="btn btn-primary fa fa-edit" href="/repo/assets/">\n' +
                '<span class= "custom-font">Verify Asset</span>' +
                '</a>'
            ].join('')
        }

        $(function () {
            var data = {{ repo_threats | safe }};
            console.log(data)
            $table.bootstrapTable({data: data});
        })
    </script>

{% endblock %}


{% block content %}
    <h1>Risk - Objective Dashboard</h1>
    <hr/>
    <div class="row">
        <div class="col-10">
            <div class="row">
                <div class="col-6">
                    <h3>Current Selected Threat:
                        <div class="dropdown">
                            <button class="btn btn-primary">{{ this_threat[0].name }}</button>
                            <div class="dropdown-list">
                                {% for threat in these_threats %}
                                    <a href="/repo/dashboard/risk/objectives/threat/{{ threat.id }}/asset/-1/">{{ threat.name }}</a>
                                {% endfor %}
                            </div>
                        </div>
                    </h3>
                </div>
                <div class="col-6">
                    <h3>Current Selected Asset:
                        <div class="dropdown">
                            <button class="btn btn-primary">
                                {% if asset_id|string == "-1"|string %}
                                    Please select an asset >
                                {% else %}
                                    {{ this_asset[0].name }} >
                                {% endif %}
                            </button>
                            <div class="dropdown-list">
                                {% for asset in these_assets %}
                                    <a href="/repo/dashboard/risk/objectives/threat/{{ threat_id }}/asset/{{ asset.id }}/">{{ asset.name }}</a>
                                {% endfor %}
                            </div>
                        </div>

                    </h3>
                </div>
            </div>

            <hr/>
            {% if threat_id != '-1' and asset_id != '-1' %}
                {#    <a class="btn btn-primary" href="/repo/threats/"> Detailed Threat View </a>#}
                <h2>Scenario Static Information</h2>
                <p>You can set any information about the scenario as static i.e. as having happened or not in order to
                    explore different outcomes</p>
                <h3>Threat Exposure</h3>
                <hr/>
                <h3>Response</h3>
                <hr/>
                <h3>Threat Materialisation</h3>
                <hr/>
                <h3>Threat Consequence</h3>
                <hr/>
                <h3>Service State</h3>
                <hr/>
                <h3>Threat Impact</h3>
                <hr/>
                <h3>Objective State</h3>
                <hr/>
                <div class="row dashboard-row">
                    <button type="button" class="btn btn-primary" style="margin-right: 3px; ">
                        Blood Test: Normal Work
                    </button>
                    <button type="button" class="btn btn-primary" style="margin-right: 3px; ">
                        Catering: Normal Work
                    </button>
                    <button type="button" class="btn btn-primary" style="margin-right: 3px; ">
                        Pharmacy: Normal Work
                    </button>
                </div>
                <h6>User Response</h6>
                <hr/>
                <div class="row dashboard-row">
                    <button type="button" class="btn btn-primary" style="margin-right: 3px; ">
                        Do Nothing
                    </button>
                </div>
                <div class="row dashboard-row">
                    <br/>
                    <table id="table">
                        <thead>
                        <tr>
                            <th data-field="likelihood">Likelihood</th>
                            <th data-field="monetary">Objective: Monetary</th>
                            <th data-field="confidentiality">Objective: Confidentiality</th>
                            <th data-field="integrity">Objective: Integrity</th>
                            <th data-field="availability">Objective: Availability</th>
                            <th data-field="safety">Objective: Safety</th>
                        </tr>
                        </thead>
                    </table>
                </div>
                </div>
                <div class="col-2">
                    <h3>Alerts</h3>
                    No Alerts Triggered
                    <hr/>
                </div>
            {% else %}
                <h2>Please Select a threat to show its dashboard</h2>
            {% endif %}
    </div>
{% endblock %}
